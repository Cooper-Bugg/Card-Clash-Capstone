<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= pageTitle %> | Card Clash</title>
    <!-- 
    	We link to the styles here so the page looks polished.
    	This is the main stylesheet.
    -->
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body class="page page-login">
    <div class="background-glow"></div>
    <!-- Horizontal line across the vertical middle of the screen -->
    <div class="login-midline"></div>
    <!-- Side-by-side: brand on left, panel on right -->
    <div class="login-layout">
      <div class="login-brand">
        <div class="brand-title">Card Clash</div>
      </div>
      <section class="panel login-panel">
        <div>
          <h1>Card Clash Teacher Login</h1>
          <p>
            Sign in to manage quiz decks, launch the Unity game and review
            AI session summaries.
          </p>
        </div>
        <!-- 
        	A simple form to enter username and password.
        	Posts to /login where the server validates credentials
        	and either starts a session or returns an error message.
        -->
        <form class="form" method="post" action="/login">
          <% if (typeof errorMessage !== 'undefined' && errorMessage) { %>
            <div style="background: rgba(230,57,70,0.12); border: 1px solid var(--coral); border-radius: 10px; padding: 10px 14px; color: var(--coral); font-weight: 600;">
              <%= errorMessage %>
            </div>
          <% } %>
          <label class="form-field">
            <span>Username</span>
            <input type="text" name="username" placeholder="teacher@example" autocomplete="username" />
          </label>
          <label class="form-field">
            <span>Password</span>
            <div class="input-reveal">
              <input id="passwordInput" type="password" name="password" placeholder="••••••••" autocomplete="current-password" />
              <button type="button" class="input-reveal-btn" id="togglePassword" aria-label="Toggle password visibility">
                <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
              </button>
            </div>
          </label>
          <div class="form-actions">
            <button class="btn btn-primary" type="submit">Enter Dashboard</button>
            <a class="btn btn-primary nav-link--danger" href="/">&#8592; Back to Home</a>
          </div>
        </form>
      </section>
    </div>
    <script>
      const togglePassword = document.getElementById("togglePassword");
      const passwordInput = document.getElementById("passwordInput");
      const eyeIcon = document.getElementById("eyeIcon");

      const eyeOpen = `<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>`;
      const eyeSlash = `<line x1="1" y1="1" x2="23" y2="23"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 11 7 11 7a13.16 13.16 0 0 1-1.67 2.68M6.61 6.61A13.526 13.526 0 0 0 1 12s4 7 11 7a9.74 9.74 0 0 0 5.39-1.61"/><path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/><path d="M6.61 6.61A13.526 13.526 0 0 0 1 12s4 7 11 7a9.74 9.74 0 0 0 5.39-1.61"/>`;

      togglePassword.addEventListener("click", () => {
        const isPassword = passwordInput.type === "password";
        passwordInput.type = isPassword ? "text" : "password";
        eyeIcon.innerHTML = isPassword ? eyeSlash : eyeOpen;
      });
    </script>
  </body>
</html>

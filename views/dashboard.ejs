<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title><%= pageTitle %> | Card Clash</title>
		<!-- 
			We link to the styles here so all pages look the same.
			This is the main stylesheet the whole app shares.
		-->
		<link rel="stylesheet" href="/styles.css" />
		<!-- Loading font from Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>
	</head>
	<body class="page">
		<!-- 
			This decorative circle/shape sits behind everything.
			It's positioned so buttons and links stay clickable on top.
		 -->
		<div class="background-glow"></div>
		<!-- 
			The header with the title and navigation menu.
			It stays at the top so you can jump between pages anytime.
		 -->
		<header class="top-bar">
			<div class="brand">
				<div class="brand-title">Card Clash</div>
				<div class="brand-subtitle">Teacher Hub</div>
			</div>
			<nav class="top-nav">
				<a class="nav-link is-active" href="/dashboard">Dashboard</a>
				<a class="nav-link" href="/deck/new">Create Deck</a>
				<a class="nav-link" href="/">Log Out</a>
			</nav>
		</header>

		<main class="page-shell">
			<!-- 
				Welcome message for the teacher.
				This explains what this page is for and has the main button to create a deck.
			 -->
			<section class="panel hero-panel">
				<div>
					<h1>Welcome back, Teacher</h1>
					<p>
						This is your classroom command center. Review decks, launch games and
						read AI summaries.
					</p>
				</div>
				<a class="btn btn-primary" href="/deck/new">Create New Deck</a>
			</section>

			<!-- 
				Left side shows your decks, right side shows recent game sessions.
				This grid arranges them side-by-side or stacks on mobile.
			 -->
			<section class="grid">
				<!-- 
					Each deck shows its name, how many questions it has,
					and buttons to play or edit.
				 -->
				<div class="panel">
					<div class="panel-header">
						<h2>Quiz Decks</h2>
						<span class="panel-meta"><%= decks.length %> total</span>
					</div>

					<div class="card-stack">
						<% for (let i = 0; i < decks.length; i += 1) { %>
							<% const deck = decks[i]; %>
							<!-- 
						One deck card. Shows the title, question count,
						and buttons to launch the game or edit.
					 -->
							<article class="card">
								<div>
									<h3><%= deck.title %></h3>
									<p><%= deck.questionCount %> questions ready</p>
								</div>
								<div class="card-actions">
									<a class="btn btn-primary" href="/game/play?deckId=<%= deck.id %>">Launch Game</a>
									<a class="btn btn-ghost" href="/deck/<%= deck.id %>/edit">Edit Deck</a>
								</div>
							</article>
						<% } %>
					</div>
				</div>

				<!-- 
					Past games you have played. Click on one
					to see the AI feedback and student stats.
				 -->
				<div class="panel">
					<div class="panel-header">
						<h2>Recent Sessions</h2>
						<span class="panel-meta"><%= sessions.length %> total</span>
					</div>

					<div class="card-stack">
						<% for (let i = 0; i < sessions.length; i += 1) { %>
							<% const session = sessions[i]; %>
							<!-- 
						One past game. Shows when you played it,
						which deck was used, a quick summary,
						and game stats like accuracy and speed.
					 -->
							<article class="card">
								<div>
									<div class="card-kicker"><%= session.createdAt %></div>
									<h3><%= session.deckTitle %></h3>
									<p class="summary"><%= session.summaryPreview %></p>
								</div>
								<div class="metrics">
									<div>
										<span class="metric-label">Rounds</span>
										<span class="metric-value"><%= session.metrics.roundsPlayed %></span>
									</div>
									<div>
										<span class="metric-label">Accuracy</span>
										<span class="metric-value"><%= session.metrics.averageAccuracy %></span>
									</div>
									<div>
										<span class="metric-label">Response</span>
										<span class="metric-value"><%= session.metrics.averageResponseTime %></span>
									</div>
								</div>
								<a class="btn btn-ghost" href="/report/<%= session.id %>">View Report</a>
							</article>
						<% } %>
					</div>
				</div>
			</section>
		</main>
	</body>
</html>
